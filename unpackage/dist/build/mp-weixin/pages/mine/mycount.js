(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/mycount"],{"073e":function(e,t,n){"use strict";var o=n("6835"),a=n.n(o);a.a},"4a72":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"9496"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"61e2"))},uCodeInput:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-code-input/u-code-input")]).then(n.bind(null,"a9cf"))},"u-Text":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--text/u--text")]).then(n.bind(null,"10ba"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"93cf"))}},a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.show=!1})},u=[]},5095:function(e,t,n){"use strict";(function(e,o){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(n("2eee")),i=a(n("c973")),s=null,r=n("cf59"),c={data:function(){return{ad_id:"",isShowAd:"0",show:!1,title:"重要提示",content:"点击观看，观看广告可获得3倍积分。点击不了谢谢，只可获得一倍积分。是否观看广告获得3倍奖励？",isdisabled:!1,text1:"签到",text2:"分享到微信",duihuanma:"",temp:0}},methods:{addUserCount:function(t,n){var o=this;return(0,i.default)(u.default.mark((function a(){var i;return u.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r._getRequest({url:"/addUserCount?score="+t+"&openid="+n,method:"GET"});case 2:i=a.sent,200===i.data["code"]&&(e.showToast({icon:"success",title:"新增积分"+t}),e.setStorageSync("userinfo",i.data["data"]["userinfo"]),e.setStorageSync("share",i.data["data"]["share_setting"]),o.setButton());case 4:case"end":return a.stop()}}),a)})))()},availableCode:function(t,n){return(0,i.default)(u.default.mark((function o(){var a;return u.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,r._getRequest({url:"/availableCode?code="+t+"&openid="+n,method:"GET"});case 2:a=o.sent,200===a.data["code"]?e.setStorageSync("userinfo",a.data["data"]["userinfo"]):e.showToast({icon:"error",title:a.data["msg"]});case 4:case"end":return o.stop()}}),o)})))()},submission:function(){var t=this;6==this.duihuanma.length?e.getStorage({key:"share",success:function(e){t.availableCode(t.duihuanma,e.data.sOpenid)}}):e.showToast({icon:"error",title:"兑换码不满6位"})},showAd:function(){s.show().catch((function(){s.load().then((function(){return s.show()})).catch((function(t){console.log(t),e.showToast({icon:"error",title:"广告显示失败"})}))}))},shareJiangli:function(){var t=this;e.getStorage({key:"share",success:function(e){t.addUserCount(3,e.data.sOpenid)},fail:function(){e.showToast({icon:"error",title:"用户未登录"})}})},ordinarySignIn:function(){var t=this;e.getStorage({key:"share",success:function(e){t.show=!1,t.addUserCount(2,e.data.sOpenid)}})},getUserCount:function(){var t=this;e.getStorage({key:"setting",success:function(n){"1"===n.data.seStatus?t.show=!0:e.getStorage({key:"share",success:function(e){t.addUserCount(2,e.data.sOpenid)}})}})},setButton:function(){var t=this;e.getStorage({key:"share",success:function(e){"1"===e.data.sIsSign&&(t.text1="已签到",t.isdisabled=!0),"1"===e.data.sIsShare&&(t.text2="分享到微信（已分享）")}})},change:function(e){this.duihuanma=e},finish:function(e){this.duihuanma=e}},mounted:function(){var t=this;e.getStorage({key:"setting",success:function(n){"1"===n.data.seStatus&&(t.isShowAd="1",t.ad_id=n.data.seVideo,o.createRewardedVideoAd&&(s=o.createRewardedVideoAd({adUnitId:n.data.seIncentive}),s.onLoad((function(){console.log("onLoad event emit")})),s.onError((function(e){console.log("onError event emit",e)})),s.onClose((function(n){n&&n.isEnded?(e.showToast({icon:"error",title:"已获得奖励"}),e.getStorage({key:"share",success:function(e){t.show=!1,t.addUserCount(6,e.data.sOpenid)},fail:function(){e.showToast({icon:"error",title:"用户未登录"})}})):e.showToast({icon:"error",title:"未获得奖励"})}))))}}),this.setButton()}};t.default=c}).call(this,n("543d")["default"],n("bc2e")["default"])},6835:function(e,t,n){},"7bbd":function(e,t,n){"use strict";n.r(t);var o=n("5095"),a=n.n(o);for(var u in o)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=a.a},"82d3":function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("33bf");o(n("66fd"));var a=o(n("bdf5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},bdf5:function(e,t,n){"use strict";n.r(t);var o=n("4a72"),a=n("7bbd");for(var u in a)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(u);n("073e");var i=n("f0c5"),s=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports}},[["82d3","common/runtime","common/vendor"]]]);